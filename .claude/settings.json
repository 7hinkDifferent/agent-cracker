{
  "hooks": {
    "SessionStart": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "\"$CLAUDE_PROJECT_DIR\"/.claude/hooks/session-status.sh",
            "timeout": 10,
            "statusMessage": "Loading project status..."
          }
        ]
      }
    ],
    "PreToolUse": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "\"$CLAUDE_PROJECT_DIR\"/.claude/hooks/pre-commit-check.sh",
            "timeout": 15
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "Write|Edit",
        "hooks": [
          {
            "type": "command",
            "command": "\"$CLAUDE_PROJECT_DIR\"/.claude/hooks/demo-syntax-check.sh",
            "timeout": 30
          },
          {
            "type": "command",
            "command": "\"$CLAUDE_PROJECT_DIR\"/.claude/hooks/validate-agents-yaml.sh",
            "timeout": 10
          }
        ]
      }
    ],
    "Stop": [
      {
        "hooks": [
          {
            "type": "prompt",
            "prompt": "检查本次对话中修改的文件，按以下映射规则判断是否有文档/配置遗漏未更新：\n\n| 修改了... | 应检查是否需更新... |\n|---|---|\n| `scripts/*.sh` | CLAUDE.md（常用命令、自动化） |\n| `.claude/hooks/*` | CLAUDE.md（自动化表格）、`.claude/settings.json`（hooks 配置） |\n| `.claude/skills/*/SKILL.md` | CLAUDE.md（项目结构 skills 列表） |\n| `package.json`（scripts 部分） | CLAUDE.md（常用命令） |\n| `docs/<agent>.md`（新分析） | `agents.yaml`（status + analyzed_commit + analyzed_date）、`demos/<agent>/README.md`（overview）、其他 docs 的 Dimension 8（提醒 /sync-comparisons） |\n| `demos/<agent>/<mechanism>/` | `demos/<agent>/README.md`（overview 标记 `[x]`）、`agents.yaml`（status）、`npm run progress`、demo README 是否有 `基于 commit` 引用 |\n| `README.md` | `README.en.md`（多语言同步） |\\n| `agents.yaml` | 自动处理（git hook 会同步 README + README.en.md + progress） |\n| `docs/TEMPLATE.md` | 现有 `docs/*.md` 是否需要同步格式变更 |\n| `demos/TEMPLATE/*` | CLAUDE.md（约定）、`.claude/skills/create-demo/SKILL.md` |\n| `projects/<agent>/`（submodule 更新） | 提醒运行 `/check-updates <agent>` 检查分析漂移 |\n\n**兜底规则**：如果修改的文件不在上述映射中，但你认为该变更可能影响项目文档的准确性，也应提醒更新。\n\nIf any follow-up was missed, respond {\"ok\": false, \"reason\": \"<what needs to be done>\"}. Otherwise respond {\"ok\": true}.",
            "timeout": 30
          }
        ]
      }
    ]
  }
}
