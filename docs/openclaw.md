# openclaw — Deep Dive Analysis

> Auto-generated from template on 2026-02-23
> Repo: https://github.com/openclaw/openclaw
> Analyzed at commit: [`ea47ab2`](https://github.com/openclaw/openclaw/tree/ea47ab29bd6d92394185636a27c3572c19aac8e5) (2026-02-23)

## 1. Overview & Architecture

### 项目定位
<!-- 一句话描述这个 agent 是什么、解决什么问题 -->

### 技术栈
<!-- 语言、框架、关键依赖 -->

### 核心架构图
<!-- ASCII 或 Mermaid 图 -->

```
[User Input] -> [???] -> [LLM] -> [???] -> [Output]
```

### 关键文件/目录
| 文件/目录 | 作用 |
|-----------|------|
| | |

---

## 2. Agent Loop（主循环机制）

### 循环流程
<!-- 描述 agent 的主事件循环：输入 -> 思考 -> 行动 -> 观察 -> ... -->

### 终止条件
<!-- 什么时候停止循环？ -->

### 关键代码
```
# 粘贴核心循环代码片段
```

---

## 3. Tool/Action 系统

### Tool 注册机制
<!-- 如何定义和注册 tool？ -->

### Tool 列表
| Tool | 功能 | 实现方式 |
|------|------|----------|
| | | |

### Tool 调用流程
<!-- LLM 如何选择和调用 tool？ -->

---

## 4. Prompt 工程

### System Prompt 结构
<!-- system prompt 的组成部分 -->

### 动态 Prompt 组装
<!-- 哪些部分是动态生成的？ -->

### Prompt 模板位置
<!-- 文件路径 -->

---

## 5. 上下文管理

### 上下文窗口策略
<!-- 如何管理有限的 context window？ -->

### 文件/代码的 context 策略
<!-- 如何决定哪些文件/代码片段放入 context？ -->

### 对话历史管理
<!-- 如何截断/压缩历史？ -->

---

## 6. 错误处理与恢复

### LLM 输出解析错误
<!-- 如何处理 LLM 返回的非预期格式？ -->

### Tool 执行失败
<!-- tool 出错后如何恢复？ -->

### 重试机制
<!-- 有无自动重试？策略是什么？ -->

---

## 7. 关键创新点

### 独特设计
<!-- 这个 agent 有什么与众不同的设计？ -->

### 值得借鉴的模式
<!-- 可以复用到其他 agent 的 pattern -->

---

## 7.5 MVP 组件清单

基于以上分析，构建最小可运行版本需要以下组件：

| 组件 | 对应维度 | 核心文件 | 建议语言 | 语言理由 |
|------|----------|----------|----------|----------|
<!-- 以下为参考类目，根据 agent 实际情况调整（可合并/拆分/新增） -->
| 主循环 | D2 | | | |
| Tool 分发 | D3 | | | |
| Prompt 组装 | D4 | | | |
| LLM 调用与解析 | D2/D6 | | | |
| 编辑应用 | D3 | | | |
<!-- 平台型 agent 额外参考类目（纯 coding agent 可删除以下行） -->
<!-- | 通道路由 | D9 | | | | -->
<!-- | 记忆检索 | D10 | | | | -->
<!-- | 安全沙箱 | D11 | | | | -->

---

## 8. 跨 Agent 对比

### vs 其他 agent
| 维度 | openclaw | 对比 Agent |
|------|----------------|------------|
| Agent Loop | | |
| Tool 系统 | | |
| Context 策略 | | |
| 错误处理 | | |

### 总结
<!-- 一段话总结这个 agent 的核心特点和适用场景 -->

---

<!-- ============================================================
     以下为平台维度（D9-D12），仅当 agent 超越纯 coding agent 时填写。
     纯 coding agent（如 aider、codex-cli）可删除或标注「不适用」。
     ============================================================ -->

## 9. 通道层与网关 _(平台维度 · 可选)_

<!-- 仅适用于支持多渠道/多模态交互的 agent 平台 -->

### 通道架构
<!-- 用户输入如何从外部渠道（CLI、Web、IM、语音）路由到 Agent？ -->
<!-- 有无 Gateway / Message Bus / WebSocket 控制面？ -->

### 支持的通道
| 通道 | 协议/集成方式 | 特点 |
|------|--------------|------|
| | | |

### 消息标准化
<!-- 不同渠道的消息格式如何统一？ -->

### 多模态支持
<!-- 语音输入/输出、Canvas/可视化、图片/文件处理 -->

---

## 10. 记忆与持久化 _(平台维度 · 可选)_

<!-- 仅适用于具有跨 session 记忆能力的 agent -->
<!-- 注意与 D5（session 内 context window 管理）的区别：D5 关注单次会话内的 token 约束，D10 关注跨会话的知识持久化 -->

### 持久化架构
<!-- Session 如何存储？格式（JSONL、SQLite、向量数据库等）？ -->

### 长期记忆
<!-- 跨 session 的知识如何积累、检索、更新？ -->
<!-- 向量检索 / 关键词搜索 / 混合策略？ -->

### 状态恢复
<!-- 崩溃恢复、session 分支、session 导出 -->

---

## 11. 安全模型与自治 _(平台维度 · 可选)_

<!-- 仅适用于有信任分级、沙箱或自主调度的 agent -->

### 信任分级
<!-- 不同来源的用户/通道有不同权限吗？ -->
<!-- operator session vs user session？ -->

### 沙箱策略
<!-- Docker 隔离、文件系统限制、网络策略 -->

### 自主调度
<!-- Cron / 定时任务 / Heartbeat / 无用户触发的自主执行？ -->

### 多 Agent 协作
<!-- Agent 间通信、任务委派、会话发现 -->

---

## 12. 其他特色机制 _(平台维度 · 可选)_

<!-- 不属于 D9-D11 但值得分析的独特机制 -->
<!-- 例如：Skills 市场/生态、Companion Apps、特殊 UI 模式、独特的部署架构 -->

### 机制列表
| 机制 | 简述 | 关键代码 |
|------|------|----------|
| | | |

### 详细分析
<!-- 逐个展开每个特色机制 -->
